<!DOCTYPE html>
<!--
/**
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Copyright (c) 2019 MlesTalk developers
 */
-->
<html>
	<head>
		<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src * 'unsafe-inline'; media-src *; img-src 'self' data:; connect-src ws://*;" />
		<title>Mles WebSocket Channels</title>
		<link href="css/zoom.css" rel="stylesheet">
		<link href="css/mlestalk.css" rel="stylesheet">
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width">
	</head>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/Autolinker.min.js"></script>
	<script src="js/qrcode.min.js"></script>
	<script src="js/siphash.js"></script>
	<script src="cordova.js"></script>
	<script src="js/mlestalk.js"></script>
	
	<body onload="onLoad()">
		<div class="body_cont">
			<div id="name_channel_cont" class="box_with_shadow">
				<form id="channel_submit" method="post">
					<p>Your name?</p>
					<input type="text" id="input_name" />
					<p>Channel?</p>
					<input type="text" id="input_channel" />
					<p>Shared key?</p>
					<input type="password" id="input_key" autocomplete="off">
					<input type="submit" value="&rarr;" id="the_join">
					<div id="server_cont" class="box_with_shadow">
						<p>Mles WebSocket server address</p>
						<input type="text" id="input_addr_port" value="mles.io:80" />
					</div>
				</form>
				<a href="http://mles.io/app">app info</a> <a href="http://mles.io/legal">legal</a>
			</div>

			<div id="message_cont" class="box_with_shadow">
				<div id="messages_list">
					<a id="qrcode_link"><div id="qrcode" style="float:right;margin:5px 5px 5px 5px;"></div></a>
					<script type="text/javascript">
						var qrcode = new QRCode(document.getElementById("qrcode"), {
							text: "undefined",
							width: 70,
							height: 70,
							colorDark : "#000000",
							colorLight : "#ffffff",
							correctLevel : QRCode.CorrectLevel.L
						});
					</script>
					<ul id="messages">
					</ul>

				</div>

				<div id="input_message_cont">
					<form id="form_send_message" method="post" action="#">
						<div class="field">
							<label for="input_file">
								<img src="img/sendimage.png" style="float:right;height:35px;" />
							</label>
							<input id="input_file" type="file" onchange="send(true);" accept="image/*"  />
							<input type="submit" id="the_send" onclick="send(true);" value="&#9166;" />
							<span><input type="text" id="input_message" oninput="send(false);" autocomplete="off" autofocus /></span>
						</div>
					</form>
				</div>
			</div>	
		</div>
		<script src="js/zoom-vanilla.js"></script>
	</body>
</html>
